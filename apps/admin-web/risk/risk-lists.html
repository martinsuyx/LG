<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>é»‘ç™½åå•</title>
<link rel="stylesheet" href="../assets/app.css"/>
</head>
<body>
<div class="layout">
<header><div class="brand">ğŸ”¶ åå°ç®¡ç†å¹³å° <span class="env">Demo</span></div><div class="hint">é»‘ç™½åå• Demo</div></header>
<aside>
<nav class="menu">
<h4>é£æ§ä¸åˆè§„</h4>
<a href="./risk-rules.html">è§„åˆ™åº“</a>
<a href="./risk-lists.html" class="active">é»‘ç™½åå•</a>
<a href="./risk-devices.html">è®¾å¤‡ç”»åƒ</a>
<a href="./risk-geofence.html">åœ°ç†å›´æ </a>
<a href="./risk-monitor.html">ç›‘æ§çœ‹æ¿</a>
<a href="./risk-tickets.html">å‘½ä¸­å·¥å•</a>
<a href="./appeals.html">ç”³è¯‰ä¸å¤æ ¸</a>
<a href="./kyc-review.html">KYC å®¡æ ¸</a>
<a href="./esign.html">ç”µå­ç­¾çº¦</a>
<h4>å¯¼èˆª</h4>
<a href="../index.html">è¿”å›é¦–é¡µ</a>
</nav>
</aside>
<main>
<div class="card">
<div class="toolbar"><div>åå•åˆ—è¡¨</div><div><button class="btn" id="btnNew">æ–°å¢</button> <button class="btn" id="btnImport">æ‰¹é‡å¯¼å…¥</button></div></div>
<div id="tbl"></div>
</div>
</main>
</div>
<div class="drawer"><div class="head"><div>åå•ç¼–è¾‘</div><div><button class="btn" onclick="closeDrawer()">å…³é—­</button></div></div><div class="body" id="drawerBody"></div></div>
<script type="module">
import { $, openDrawer, closeDrawer, toast } from '../assets/app.js';
let items=[
{id:'L-1', list_type:'black', subject:'mobile', value:'1380000****', source:'ops', expire_at:'â€”'},
{id:'L-2', list_type:'white', subject:'store', value:'é—¨åº—A', source:'ops', expire_at:'â€”'},
];
function tag(type){ return `<span class='tag ${type==='black'?'failed':'confirmed'}'>${type}</span>` }
function render(){
$('#tbl').innerHTML=`<table><thead><tr><th>ID</th><th>ç±»å‹</th><th>å¯¹è±¡</th><th>å€¼</th><th>æ¥æº</th><th>æœ‰æ•ˆæœŸ</th><th>æ“ä½œ</th></tr></thead>
<tbody>${items.map(x=>`<tr><td>${x.id}</td><td>${tag(x.list_type)}</td><td>${x.subject}</td><td>${x.value}</td><td>${x.source}</td><td>${x.expire_at}</td>
<td><button class='btn' onclick='edit("${x.id}")'>ç¼–è¾‘</button> <button class='btn danger' onclick='del("${x.id}")'>åˆ é™¤</button></td></tr>`).join('')}</tbody></table>`
}
window.edit=(id)=>{ const x=items.find(i=>i.id===id); openDrawer(); $('#drawerBody').innerHTML=`
<div class='desc'>
<div class='row'><div class='label'>ç±»å‹</div><div class='value'><select id='t'><option value='black' ${x.list_type==='black'?'selected':''}>black</option><option value='white' ${x.list_type==='white'?'selected':''}>white</option></select></div></div>
<div class='row'><div class='label'>å¯¹è±¡</div><div class='value'><select id='s'><option>mobile</option><option>idcard</option><option>bankcard</option><option>device</option><option>store</option><option>user</option></select></div></div>
<div class='row'><div class='label'>å€¼</div><div class='value'><input id='v' value='${x.value}' style='height:34px;padding:0 10px;border:1px solid var(--line);border-radius:8px'></div></div>
</div>
<div style='margin-top:12px'><button class='btn primary' id='ok'>ä¿å­˜</button></div>`;
$('#ok').onclick=()=>{ x.list_type=$('#t').value; x.subject=$('#s').value; x.value=$('#v').value; toast('å·²ä¿å­˜','success'); render(); closeDrawer(); }
}
window.del=(id)=>{ items=items.filter(i=>i.id!==id); toast('å·²åˆ é™¤','success'); render(); }
$('#btnNew').onclick=()=>{ items.unshift({id:'L-'+Math.floor(Math.random()*1e5),list_type:'black',subject:'mobile',value:'138****8888',source:'ops',expire_at:'â€”'}); render(); }
$('#btnImport').onclick=()=>toast('å¯¼å…¥åŠŸèƒ½å ä½ï¼ˆCSV æ ¡éªŒâ†’å…¥åº“ï¼‰','info')
render();
</script>
</body></html>