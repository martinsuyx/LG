import{d as S,c as h,r as _,b as s,n as $,e as o,F as c,h as y,m as B,s as k,t as g,I as f,q as n,_ as O}from"./index-DvtP9USg.js";const T=["aria-busy"],j=["onClick"],F={class:"sort-ind","aria-hidden":!0},N={key:0},z=["onClick"],I={key:1},V={key:2},q={class:"empty"},x=["colspan"],D={class:"jg-table__pagination"},E=S({__name:"Table",props:{columns:{},rows:{},loading:{type:Boolean},rowKey:{type:Function},defaultSortKey:{},defaultSortOrder:{}},emits:["sortChange","rowClick"],setup(i,{emit:b}){const l=i,p=b,v=h(()=>l.columns.filter(e=>!e.hidden)),r=_(l.defaultSortKey||""),u=_(l.defaultSortOrder||"asc");function C(e){return typeof l.rowKey=="function"?l.rowKey(e):typeof l.rowKey=="string"?e[l.rowKey]:e.id||e.order_id||JSON.stringify(e)}const w=h(()=>{const e=[...l.rows||[]];return r.value?e.sort((d,t)=>{const a=d[r.value],m=t[r.value];return(a>m?1:a<m?-1:0)*(u.value==="asc"?1:-1)}):e});function K(e){r.value!==e?(r.value=e,u.value="asc"):u.value=u.value==="asc"?"desc":"asc",p("sortChange",r.value,u.value)}return(e,d)=>(n(),s("div",{class:$(["jg-table",{"is-loading":i.loading}])},[o("div",{class:"jg-table__wrap",role:"region","aria-busy":i.loading?"true":"false"},[o("table",null,[o("thead",null,[o("tr",null,[(n(!0),s(c,null,y(v.value,t=>(n(),s("th",{key:t.key,style:B({width:t.width||void 0})},[t.sortable?(n(),s("button",{key:0,class:"th-sort",onClick:a=>K(t.key)},[k(g(t.title)+" ",1),o("span",F,g(r.value===t.key?u.value==="asc"?"↑":"↓":""),1)],8,j)):(n(),s(c,{key:1},[k(g(t.title),1)],64))],4))),128))])]),!i.loading&&i.rows.length?(n(),s("tbody",N,[(n(!0),s(c,null,y(w.value,t=>(n(),s("tr",{key:C(t),onClick:a=>e.$emit("rowClick",t),tabindex:"0"},[(n(!0),s(c,null,y(v.value,a=>(n(),s("td",{key:a.key},[f(e.$slots,`cell:${a.key}`,{row:t},()=>[k(g(t[a.key]),1)])]))),128))],8,z))),128))])):i.loading?(n(),s("tbody",I,[(n(),s(c,null,y(5,t=>o("tr",{key:t,class:"skeleton-row"},[(n(!0),s(c,null,y(v.value,a=>(n(),s("td",{key:a.key},[...d[0]||(d[0]=[o("div",{class:"skl"},null,-1)])]))),128))])),64))])):(n(),s("tbody",V,[o("tr",q,[o("td",{colspan:v.value.length},[f(e.$slots,"empty",{},()=>[d[1]||(d[1]=k("暂无数据",-1))])],8,x)])]))])],8,T),o("div",D,[f(e.$slots,"pagination",{},void 0)])],2))}}),L=O(E,[["__scopeId","data-v-57717d95"]]);export{L as T};
