import{O as Se,d as Xe,a as de,r as w,c as f,w as Ce,o as Ze,b as r,e as a,f as z,A as T,B as y,i as N,v as X,j as ue,F as k,h as g,t as i,n as Z,k as I,l as ee,m as te,p as et,q as n,s as h,E as tt,_ as at}from"./index-DvtP9USg.js";import{B as D}from"./Button-BaguUGDy.js";import{P as st}from"./Pagination-3ermIvaY.js";import{T as lt}from"./Table-BsZuLW91.js";function j(){return{"Content-Type":"application/json",...Se.HEADERS||{}}}function U(_,c){var l;const o=((l=Se.BASE)==null?void 0:l.replace(/\/$/,""))||"";if(!c||Object.keys(c).length===0)return`${o}${_}`;const x=new URLSearchParams;Object.entries(c).forEach(([S,v])=>{if(!(v==null||v==="")){if(Array.isArray(v)){v.length&&x.append(S,v.join(","));return}x.append(S,String(v))}});const C=x.toString();return C?`${o}${_}?${C}`:`${o}${_}`}async function B(_,c){const o=await fetch(_,c);if(!o.ok){let C=`Request failed with ${o.status}`,l=null;const S=o.headers.get("content-type")||"";try{if(S.includes("application/json")){if(l=await o.json(),l&&typeof l=="object"&&"message"in l){const m=l.message;typeof m=="string"&&m.trim().length&&(C=m)}}else{const m=await o.text();m.trim().length&&(C=m)}}catch{}const v=new Error(C);throw l&&typeof l=="object"&&Object.assign(v,{details:l}),v}return o.status===204?void 0:(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text()}const K={async overview(_){const c=U("/api/v1/reports/overview",_);return B(c,{method:"GET",headers:j()})},async series(_,c){const o=U("/api/v1/reports/series",{...c,metric:_});return B(o,{method:"GET",headers:j()})},async compare(_,c,o){const x=U("/api/v1/reports/compare",{...o,dimension:_,metric:c});return B(x,{method:"GET",headers:j()})},async table(_){const c=U("/api/v1/reports/table",_);return B(c,{method:"GET",headers:j()})},async exportOverview(_){const c=U("/api/v1/reports/export");return B(c,{method:"POST",headers:j(),body:JSON.stringify(_)})}},nt={class:"reports-overview"},rt={class:"reports-overview__header"},it={class:"reports-overview__actions"},ot={class:"filters__group"},dt={class:"filters__grid"},ut={class:"filters__field"},ct=["disabled"],pt={class:"filters__field"},_t=["disabled"],vt={class:"filters__field"},mt=["disabled"],yt=["value"],ht={class:"filters__field"},bt=["disabled"],ft={class:"filters__field"},kt=["disabled"],gt={class:"filters__field filters__field--stretch"},wt=["disabled"],xt=["value"],Ct={class:"filters__field"},St=["disabled"],Mt=["value"],zt={class:"filters__actions"},$t={class:"quick-range"},Tt=["disabled","onClick"],Nt={class:"filters__buttons"},At={class:"kpi-group"},Dt={class:"kpi-group__grid"},Ot=["onClick","onKeydown"],Pt={class:"kpi-card__header"},Vt={class:"kpi-card__label"},Et=["data-trend"],Ft={key:0},Rt={key:1},It={key:2},jt={class:"kpi-card__value"},Ut={key:0,class:"kpi-card__delta"},Bt={class:"kpi-group"},Kt={class:"kpi-group__grid"},qt=["onClick","onKeydown"],Gt={class:"kpi-card__header"},Ht={class:"kpi-card__label"},Lt=["data-trend"],Yt={key:0},Wt={key:1},Jt={key:2},Qt={class:"kpi-card__value"},Xt={key:0,class:"kpi-card__delta"},Zt={key:0,class:"empty-placeholder"},ea={class:"reports-overview__analytics"},ta={class:"analytics-card"},aa={class:"analytics-card__head"},sa={class:"metric-switch"},la=["onClick"],na={key:0,class:"trend-chart",role:"img","aria-label":"指标趋势图"},ra={class:"trend-chart__list"},ia={class:"trend-chart__bars"},oa={class:"trend-chart__time"},da={key:1,class:"empty-placeholder"},ua={class:"analytics-card"},ca={class:"analytics-card__head"},pa={class:"metric-switch"},_a=["onClick"],va=["aria-label"],ma={class:"compare-chart__list"},ya={class:"compare-chart__info"},ha={class:"compare-chart__name"},ba={class:"compare-chart__value"},fa={class:"compare-chart__bar-wrapper"},ka={key:1,class:"empty-placeholder"},ga={key:0,class:"reports-overview__reports"},wa={class:"report-card-grid"},xa={class:"reports-overview__table"},Ca={class:"section-header"},Sa={class:"table-name"},Ma={class:"table-name__id"},za={key:1,class:"feedback feedback--error",role:"alert"},$a={key:2,class:"feedback"},Ta=Xe({__name:"ReportsOverviewPage",setup(_){const c=et(),o=new Date,x=M(o),C=M(ie(o,-6)),l=de({start:C,end:x,granularity:"d",companyId:"",city:"",channel:[],dimension:"campaign"}),S=w("7d"),v=w("settlement"),m=w("settlement"),u=de({overview:!1,series:!1,compare:!1,table:!1,exporting:!1}),q=w(null),ae=w([]),se=w([]),le=w([]),ne=w(null),O=w(""),A=w(""),p=de({page:1,pageSize:20,total:0}),Me=[{value:"d",label:"按日"},{value:"w",label:"按周"},{value:"m",label:"按月"}],ze=[{value:"wechat",label:"微信"},{value:"h5",label:"H5"},{value:"app",label:"APP"},{value:"api",label:"API"}],ce=[{value:"campaign",label:"活动"},{value:"store",label:"门店"},{value:"promoter",label:"推广人"}],$e=[{value:"today",label:"今日"},{value:"7d",label:"近 7 天"},{value:"30d",label:"近 30 天"}],pe=[{value:"orders",label:"订单数"},{value:"gmv",label:"GMV"},{value:"settlement",label:"结算金额"},{value:"withdraw",label:"提现金额"}],Te=[...pe],Ne={orders:{label:"订单数",unit:"笔",group:"biz",formatter:"number"},gmv:{label:"GMV",unit:"元",group:"biz",formatter:"amount"},settlement:{label:"结算金额",unit:"元",group:"biz",formatter:"amount"},withdraw:{label:"提现金额",unit:"元",group:"biz",formatter:"amount"},avg_order_value:{label:"客单价",unit:"元",group:"biz",formatter:"amount"},approval_rate:{label:"通过率",unit:"%",group:"biz",formatter:"percent"},risk_hits:{label:"风控命中",unit:"笔",group:"compliance",formatter:"number"},ticket_close_rate:{label:"工单关闭率",unit:"%",group:"compliance",formatter:"percent"},kyc_pass_rate:{label:"KYC 通过率",unit:"%",group:"compliance",formatter:"percent"}},G={kpis:[{key:"orders",value:1680,delta:8.5,trend:"up",unit:"笔",drill_link:"/orders?status=approved"},{key:"gmv",value:985430.65,delta:5.2,trend:"up",unit:"元",drill_link:"/reports/exports?type=gmv"},{key:"settlement",value:725840.48,delta:-2.8,trend:"down",unit:"元",drill_link:"/wallet/summary"},{key:"withdraw",value:254360.1,delta:3.1,trend:"up",unit:"元",drill_link:"/withdraws"},{key:"avg_order_value",value:587.12,delta:-1.4,trend:"down",unit:"元",drill_link:"/reports/detail/avg-order"},{key:"approval_rate",value:.863,delta:2.1,trend:"up",unit:"%",drill_link:"/review"},{key:"risk_hits",value:324,delta:-6.2,trend:"down",unit:"笔",drill_link:"/risk/hits"},{key:"ticket_close_rate",value:.782,delta:4.6,trend:"up",unit:"%",drill_link:"/risk/tickets"},{key:"kyc_pass_rate",value:.912,delta:1.8,trend:"up",unit:"%",drill_link:"/risk/kyc"}],reports:[{report_key:"sales_daily",title:"销售日报",desc:"按门店/渠道拆分的销售与结算明细。",route:"/exports?type=sales-daily"},{report_key:"channel_weekly",title:"渠道周报",desc:"渠道转化、GMV、成本与 ROI 周度表现。",route:"/reports/channel-weekly"},{report_key:"activity_monthly",title:"活动效果月报",desc:"活动曝光、下单与转化漏斗。",route:"/reports/activity-monthly"},{report_key:"risk_weekly",title:"风控周报",desc:"命中、工单与处置效率，对比周度表现。",route:"/risk/hits"},{report_key:"finance_reconcile",title:"财务对账报表",desc:"订单、提现、分账与平台佣金对账。",route:"/wallet/ledger"}]},_e={metric:"settlement",points:[{ts:"2025-09-25",value:68230.12,baseline_yesterday:70410.32,baseline_lastweek:65500.98},{ts:"2025-09-26",value:71540.02,baseline_yesterday:68230.12,baseline_lastweek:64820.31},{ts:"2025-09-27",value:73525.55,baseline_yesterday:71540.02,baseline_lastweek:66014.28},{ts:"2025-09-28",value:70118.43,baseline_yesterday:73525.55,baseline_lastweek:67240.03},{ts:"2025-09-29",value:74890.88,baseline_yesterday:70118.43,baseline_lastweek:68110.52},{ts:"2025-09-30",value:78214.63,baseline_yesterday:74890.88,baseline_lastweek:69420.37},{ts:"2025-10-01",value:82540.97,baseline_yesterday:78214.63,baseline_lastweek:71204.66}]},ve={dimension:"campaign",metric:"settlement",items:[{id:"CAMP-202509",name:"开学季大促",metric:189230.45},{id:"CAMP-202508",name:"社群团购",metric:146820.32},{id:"CAMP-202507",name:"门店引流礼卡",metric:118540.27},{id:"CAMP-202506",name:"会员节",metric:102310.11},{id:"CAMP-202505",name:"暑期早鸟",metric:89660.58}]},P={total:3,page:1,page_size:20,items:[{id:"S001",name:"广州天河一店",orders:420,gmv:228540.34,settlement:182340.12,withdraw:80210.77,approval_rate:.88},{id:"S002",name:"深圳福田旗舰店",orders:386,gmv:205110.55,settlement:169450.88,withdraw:75640.22,approval_rate:.91},{id:"S003",name:"上海陆家嘴中心店",orders:362,gmv:196530.21,settlement:158460.43,withdraw:70215.33,approval_rate:.87}]},me=f(()=>we("biz")),ye=f(()=>we("compliance")),H=f(()=>ae.value),L=f(()=>se.value),Ae=f(()=>H.value.length?Math.max(...H.value.map(t=>t.value||0),1):1),De=f(()=>L.value.length?Math.max(...L.value.map(t=>t.metric||0),1):1),Oe=[{key:"name",title:"名称",width:"16rem"},{key:"orders",title:"订单数",width:"8rem"},{key:"gmv",title:"GMV",width:"9rem"},{key:"settlement",title:"结算金额",width:"9rem"},{key:"withdraw",title:"提现金额",width:"9rem"},{key:"approval_rate",title:"通过率",width:"7rem"}],Pe=f(()=>{var t;return((t=ne.value)==null?void 0:t.items)??[]}),he=f(()=>Math.max(1,Math.ceil((p.total||0)/p.pageSize))),Y=f(()=>{var t;return((t=ce.find(s=>s.value===l.dimension))==null?void 0:t.label)??"维度"}),b=f(()=>u.overview||u.series||u.compare||u.table||u.exporting),be=f(()=>le.value);Ce(v,()=>{fe()}),Ce(()=>[l.dimension,m.value],()=>{p.page=1,ke(),W()}),Ze(()=>{V()});function Ve(){V()}function V(){Ee(),fe(),ke(),W()}async function Ee(){var t;u.overview=!0;try{const s=await K.overview(E()),e=Array.isArray(s==null?void 0:s.kpis)&&s.kpis.length?s.kpis:G.kpis;q.value={kpis:e,reports:(t=s==null?void 0:s.reports)!=null&&t.length?s.reports:G.reports},le.value=q.value.reports??[]}catch(s){q.value=G,le.value=G.reports??[],F(s.message||"加载概览数据失败")}finally{u.overview=!1}}async function fe(){u.series=!0;try{const t=await K.series(v.value,E()),s=Array.isArray(t==null?void 0:t.points)&&t.points.length?t.points:_e.points;ae.value=s}catch(t){ae.value=_e.points,F(t.message||"加载趋势数据失败")}finally{u.series=!1}}async function ke(){u.compare=!0;try{const t=await K.compare(l.dimension,m.value,E());se.value=Array.isArray(t==null?void 0:t.items)&&t.items.length?t.items:ve.items}catch(t){se.value=ve.items,F(t.message||"加载对比数据失败")}finally{u.compare=!1}}async function W(){u.table=!0;try{const t=await K.table({...E(),dimension:l.dimension,metric:m.value,page:p.page,page_size:p.pageSize});ne.value=t,p.total=typeof(t==null?void 0:t.total)=="number"?t.total:P.total}catch(t){ne.value=P,p.page=P.page,p.pageSize=P.page_size,p.total=P.total,F(t.message||"加载明细表失败")}finally{u.table=!1}}async function ge(){if(!u.exporting){u.exporting=!0;try{await K.exportOverview({...E(),dimension:l.dimension,metric:m.value}),Le("导出任务已创建，请前往导出中心查看。")}catch(t){F(t.message||"导出失败，请稍后再试。")}finally{u.exporting=!1}}}function we(t){var e;return(((e=q.value)==null?void 0:e.kpis)??[]).map(d=>{const Q=Ne[d.key]||{label:d.label??d.key,unit:d.unit??"",group:"biz",formatter:"number"};if(Q.group!==t)return null;const oe=Q.formatter??"number",Je=oe==="percent"?xe(d.value):oe==="amount"?R(d.value):J(d.value),Qe=typeof d.delta=="number"?`${d.delta>=0?"+":""}${d.delta.toFixed(1)}%`:"";return{...d,label:Q.label,unit:oe==="percent"?"":Q.unit,displayValue:Je,deltaText:Qe,trend:d.trend??(d.delta===void 0?"flat":d.delta>=0?"up":"down")}}).filter(Boolean)}function Fe(t){v.value!==t&&(v.value=t)}function Re(t){m.value!==t&&(m.value=t)}function Ie(){p.page=1,V()}function je(){l.start=C,l.end=x,l.granularity="d",l.companyId="",l.city="",l.channel=[],l.dimension="campaign",v.value="settlement",m.value="settlement",S.value="7d",p.page=1,p.pageSize=20,V()}function Ue(t){S.value=t,t==="today"?(l.start=M(o),l.end=M(o)):t==="7d"?(l.start=M(ie(o,-6)),l.end=M(o)):(l.start=M(ie(o,-29)),l.end=M(o)),p.page=1,V()}function E(){return{start:l.start,end:l.end,granularity:l.granularity,company_id:l.companyId||void 0,city:l.city||void 0,channel:l.channel.length?l.channel:void 0}}function Be(t){p.page=t,W()}function Ke(t){p.pageSize=t,p.page=1,W()}function re(t){return!t||!Number.isFinite(t)?"0%":`${Math.min(100,Math.max(2,t/Ae.value*100))}%`}function qe(t){return!t||!Number.isFinite(t)?"0%":`${Math.min(100,Math.max(4,t/De.value*100))}%`}function $(t){if(t){if(t.startsWith("http")){window.open(t,"_blank","noopener");return}c.push(t)}}function Ge(t){const s=new URLSearchParams({dimension:l.dimension,id:t.id,start:l.start,end:l.end});c.push(`/reports/detail?${s.toString()}`)}function He(t){t&&$(t)}function Le(t){O.value=t,A.value="",window.setTimeout(()=>{O.value===t&&(O.value="")},3e3)}function F(t){A.value=t,window.setTimeout(()=>{A.value===t&&(A.value="")},4e3)}function Ye(t){const s=new Date(t);return Number.isNaN(s.getTime())?t:`${s.getMonth()+1}-${String(s.getDate()).padStart(2,"0")}`}function J(t){return t==null||Number.isNaN(t)?"—":new Intl.NumberFormat("zh-CN",{maximumFractionDigits:0}).format(t)}function R(t){return t==null||Number.isNaN(t)?"—":new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",maximumFractionDigits:2}).format(t)}function xe(t){return t==null||Number.isNaN(t)?"—":`${(t*100).toFixed(1)}%`}function We(t,s){return s==="orders"?J(t):s==="gmv"||s==="settlement"||s==="withdraw"?R(t):J(t)}function ie(t,s){const e=new Date(t);return e.setDate(e.getDate()+s),e}function M(t){const s=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${s}-${e}-${d}`}return(t,s)=>(n(),r("section",nt,[a("header",rt,[s[9]||(s[9]=a("div",null,[a("h1",{class:"reports-overview__title"},"报表总览"),a("p",{class:"reports-overview__subtitle"},"经营与合规关键指标的一站式入口，可下钻与导出。")],-1)),a("div",it,[T(D,{size:"sm",variant:"ghost",disabled:b.value,onClick:Ve},{default:y(()=>[...s[7]||(s[7]=[h("刷新",-1)])]),_:1},8,["disabled"]),T(D,{size:"sm",loading:u.exporting,onClick:ge},{default:y(()=>[...s[8]||(s[8]=[h("导出当前视图",-1)])]),_:1},8,["loading"])])]),a("form",{class:"reports-overview__filters",onSubmit:I(Ie,["prevent"])},[a("fieldset",ot,[s[21]||(s[21]=a("legend",{class:"sr-only"},"筛选条件",-1)),a("div",dt,[a("label",ut,[s[10]||(s[10]=a("span",null,"开始日期",-1)),N(a("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=e=>l.start=e),disabled:b.value},null,8,ct),[[X,l.start]])]),a("label",pt,[s[11]||(s[11]=a("span",null,"结束日期",-1)),N(a("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>l.end=e),disabled:b.value},null,8,_t),[[X,l.end]])]),a("label",vt,[s[12]||(s[12]=a("span",null,"粒度",-1)),N(a("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>l.granularity=e),disabled:b.value},[(n(),r(k,null,g(Me,e=>a("option",{key:e.value,value:e.value},i(e.label),9,yt)),64))],8,mt),[[ue,l.granularity]])]),a("label",ht,[s[13]||(s[13]=a("span",null,"公司",-1)),N(a("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=e=>l.companyId=e),placeholder:"公司 ID / 别名",disabled:b.value},null,8,bt),[[X,l.companyId,void 0,{trim:!0}]])]),a("label",ft,[s[14]||(s[14]=a("span",null,"城市",-1)),N(a("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=e=>l.city=e),placeholder:"城市代码",disabled:b.value},null,8,kt),[[X,l.city,void 0,{trim:!0}]])]),a("label",gt,[s[15]||(s[15]=a("span",null,"渠道",-1)),N(a("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>l.channel=e),multiple:"",disabled:b.value},[(n(),r(k,null,g(ze,e=>a("option",{key:e.value,value:e.value},i(e.label),9,xt)),64))],8,wt),[[ue,l.channel]]),s[16]||(s[16]=a("small",null,"可多选；为空时表示全部渠道。",-1))]),a("label",Ct,[s[17]||(s[17]=a("span",null,"维度",-1)),N(a("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>l.dimension=e),disabled:b.value},[(n(),r(k,null,g(ce,e=>a("option",{key:e.value,value:e.value},i(e.label),9,Mt)),64))],8,St),[[ue,l.dimension]])])]),a("div",zt,[a("div",$t,[s[18]||(s[18]=a("span",null,"快速选择：",-1)),(n(),r(k,null,g($e,e=>a("button",{key:e.value,type:"button",class:Z(["quick-range__btn",{"is-active":S.value===e.value}]),disabled:b.value,onClick:d=>Ue(e.value)},i(e.label),11,Tt)),64))]),a("div",Nt,[T(D,{size:"sm",type:"submit",loading:b.value},{default:y(()=>[...s[19]||(s[19]=[h("应用",-1)])]),_:1},8,["loading"]),T(D,{size:"sm",variant:"ghost",type:"button",onClick:je,disabled:b.value},{default:y(()=>[...s[20]||(s[20]=[h("重置",-1)])]),_:1},8,["disabled"])])])])],32),a("section",{class:Z(["reports-overview__kpis",{"is-loading":u.overview}])},[a("div",At,[s[22]||(s[22]=a("header",{class:"kpi-group__head"},[a("h2",null,"经营指标")],-1)),a("div",Dt,[(n(!0),r(k,null,g(me.value,e=>(n(),r("article",{key:e.key,class:"kpi-card",role:"button",tabindex:"0",onClick:d=>$(e.drill_link),onKeydown:[ee(I(d=>$(e.drill_link),["prevent"]),["enter"]),ee(I(d=>$(e.drill_link),["prevent"]),["space"])]},[a("header",Pt,[a("span",Vt,i(e.label),1),a("span",{class:"kpi-card__trend","data-trend":e.trend},[e.trend==="up"?(n(),r("span",Ft,"▲")):e.trend==="down"?(n(),r("span",Rt,"▼")):(n(),r("span",It,"■"))],8,Et)]),a("div",jt,[a("strong",null,i(e.displayValue),1),a("span",null,i(e.unit),1)]),e.deltaText?(n(),r("p",Ut,i(e.deltaText),1)):z("",!0)],40,Ot))),128))])]),a("div",Bt,[s[23]||(s[23]=a("header",{class:"kpi-group__head"},[a("h2",null,"合规指标")],-1)),a("div",Kt,[(n(!0),r(k,null,g(ye.value,e=>(n(),r("article",{key:e.key,class:"kpi-card",role:"button",tabindex:"0",onClick:d=>$(e.drill_link),onKeydown:[ee(I(d=>$(e.drill_link),["prevent"]),["enter"]),ee(I(d=>$(e.drill_link),["prevent"]),["space"])]},[a("header",Gt,[a("span",Ht,i(e.label),1),a("span",{class:"kpi-card__trend","data-trend":e.trend},[e.trend==="up"?(n(),r("span",Yt,"▲")):e.trend==="down"?(n(),r("span",Wt,"▼")):(n(),r("span",Jt,"■"))],8,Lt)]),a("div",Qt,[a("strong",null,i(e.displayValue),1),a("span",null,i(e.unit),1)]),e.deltaText?(n(),r("p",Xt,i(e.deltaText),1)):z("",!0)],40,qt))),128))])]),!me.value.length&&!ye.value.length&&!u.overview?(n(),r("p",Zt," 暂无指标数据，请调整筛选条件。 ")):z("",!0)],2),a("section",ea,[a("article",ta,[a("header",aa,[s[24]||(s[24]=a("div",null,[a("h2",null,"趋势对比"),a("p",null,"按选择的指标显示时间序列，含昨日与上周基准。")],-1)),a("div",sa,[(n(),r(k,null,g(pe,e=>a("button",{key:e.value,type:"button",class:Z(["metric-switch__btn",{"is-active":v.value===e.value}]),onClick:d=>Fe(e.value)},i(e.label),11,la)),64))])]),H.value.length?(n(),r("div",na,[a("ul",ra,[(n(!0),r(k,null,g(H.value,e=>(n(),r("li",{key:e.ts,class:"trend-chart__item"},[a("div",ia,[a("span",{class:"trend-chart__value",style:te({height:re(e.value)})},null,4),e.baseline_yesterday!==void 0?(n(),r("span",{key:0,class:"trend-chart__marker trend-chart__marker--yesterday",style:te({bottom:re(e.baseline_yesterday)}),title:"昨日同期"},null,4)):z("",!0),e.baseline_lastweek!==void 0?(n(),r("span",{key:1,class:"trend-chart__marker trend-chart__marker--lastweek",style:te({bottom:re(e.baseline_lastweek)}),title:"上周同期"},null,4)):z("",!0)]),a("time",oa,i(Ye(e.ts)),1)]))),128))])])):(n(),r("p",da,"暂无趋势数据"))]),a("article",ua,[a("header",ca,[a("div",null,[a("h2",null,i(Y.value)+"维度对比",1),a("p",null,"查看按 "+i(Y.value)+" 聚合的 Top 表现。",1)]),a("div",pa,[(n(),r(k,null,g(Te,e=>a("button",{key:e.value,type:"button",class:Z(["metric-switch__btn",{"is-active":m.value===e.value}]),onClick:d=>Re(e.value)},i(e.label),11,_a)),64))])]),L.value.length?(n(),r("div",{key:0,class:"compare-chart",role:"img","aria-label":`${Y.value}对比`},[a("ol",ma,[(n(!0),r(k,null,g(L.value,e=>(n(),r("li",{key:e.id,class:"compare-chart__item"},[a("div",ya,[a("span",ha,i(e.name),1),a("span",ba,i(We(e.metric,m.value)),1)]),a("div",fa,[a("span",{class:"compare-chart__bar",style:te({width:qe(e.metric)})},null,4)])]))),128))])],8,va)):(n(),r("p",ka,"暂无对比数据"))])]),be.value.length?(n(),r("section",ga,[s[26]||(s[26]=a("header",{class:"section-header"},[a("h2",null,"常用报表入口"),a("p",null,"快速跳转或下载固定模板报表。")],-1)),a("div",wa,[(n(!0),r(k,null,g(be.value,e=>(n(),r("article",{key:e.report_key,class:"report-card"},[a("header",null,[a("h3",null,i(e.title),1),a("p",null,i(e.desc),1)]),a("footer",null,[T(D,{size:"sm",variant:"ghost",onClick:d=>He(e.route)},{default:y(()=>[...s[25]||(s[25]=[h(" 前往查看 ",-1)])]),_:1},8,["onClick"])])]))),128))])])):z("",!0),a("section",xa,[a("header",Ca,[a("div",null,[a("h2",null,i(Y.value)+"明细",1),s[27]||(s[27]=a("p",null,"与当前筛选同步的聚合数据，可点击行下钻。",-1))]),T(D,{size:"sm",variant:"ghost",disabled:u.table,onClick:ge},{default:y(()=>[...s[28]||(s[28]=[h("导出表格",-1)])]),_:1},8,["disabled"])]),T(lt,{columns:Oe,rows:Pe.value,loading:u.table,"row-key":e=>e.id,onRowClick:Ge},{"cell:name":y(({row:e})=>[a("div",Sa,[a("strong",null,i(e.name),1),a("span",Ma,i(e.id),1)])]),"cell:orders":y(({row:e})=>[h(i(J(e.orders)),1)]),"cell:gmv":y(({row:e})=>[h(i(R(e.gmv)),1)]),"cell:settlement":y(({row:e})=>[h(i(R(e.settlement)),1)]),"cell:withdraw":y(({row:e})=>[h(i(R(e.withdraw)),1)]),"cell:approval_rate":y(({row:e})=>[h(i(xe(e.approval_rate)),1)]),empty:y(()=>[h(i(u.table?"加载中…":"暂无明细数据"),1)]),pagination:y(()=>[he.value>1?(n(),tt(st,{key:0,page:p.page,pages:he.value,"page-size":p.pageSize,"onUpdate:page":Be,"onUpdate:pageSize":Ke},null,8,["page","pages","page-size"])):z("",!0)]),_:1},8,["rows","loading","row-key"])]),A.value?(n(),r("p",za,i(A.value),1)):O.value?(n(),r("p",$a,i(O.value),1)):z("",!0)]))}}),Pa=at(Ta,[["__scopeId","data-v-29cef36b"]]);export{Pa as default};
