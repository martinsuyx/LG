<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>å…¬å¸è´¦æˆ·</title>
<link rel="stylesheet" href="../assets/app.css"/>
</head>
<body>
<div class="layout">
<header><div class="brand">ğŸ”¶ åå°ç®¡ç†å¹³å° <span class="env">Demo</span></div><div class="hint">çº¯å‰ç«¯é™æ€é¢„è§ˆ</div></header>
<aside>
<nav class="menu">
<h4>èµ„é‡‘ä¸è´¦æˆ·</h4>
<a href="./finance-recharge.html">å®¢æˆ·å……å€¼ç®¡ç†</a>
<a href="./finance-company-account.html" class="active">å…¬å¸è´¦æˆ·</a>
<a href="./finance-platform-account.html">å¹³å°è´¦æˆ·</a>
<a href="./finance-settlement-center.html">ç»“ç®—ä¸­å¿ƒ</a>
<a href="./finance-withdraw.html">æç°ç®¡ç†</a>
<a href="./finance-recon-reports.html">å¯¹è´¦æŠ¥è¡¨</a>
<h4>å¯¼èˆª</h4>
<a href="../index.html">è¿”å›é¦–é¡µ</a>
</nav>
</aside>
<main>
<div class="kpis">
<div class="kpi"><div class="title">å¯ç”¨ä½™é¢</div><div class="num" id="avail">Â¥ 860,000</div></div>
<div class="kpi"><div class="title">å†»ç»“ä½™é¢</div><div class="num" id="frozen">Â¥ 120,000</div></div>
<div class="kpi"><div class="title">å¾…å…¥è´¦</div><div class="num" id="pending">Â¥ 15,000</div></div>
</div>
<div class="card">
<div class="toolbar"><div>è´¦æˆ·æ˜ç»†</div><div><button class="btn" id="btnAdj">å‘èµ·è°ƒè´¦</button></div></div>
<div id="tbl"></div>
</div>
</main>
</div>
<div class="drawer"><div class="head"><div>è°ƒè´¦ç”³è¯·</div><div><button class="btn" onclick="closeDrawer()">å…³é—­</button></div></div><div class="body" id="drawerBody"></div></div>
<script src="../assets/app.js"></script>
<script>
const ledger=[
{id:'L1001', time:'2025-09-19 10:00', entry:'credit', amount:52000, balance_after:900000, biz:'recharge/rcg_1002', note:'å®¢æˆ·å……å€¼'},
{id:'L1002', time:'2025-09-19 15:20', entry:'debit', amount:1800, balance_after:898200, biz:'settlement/ord_2001', note:'è®¢å•å†»ç»“'},
];
function row(r){ const color=r.entry==='credit'?'#10B981':'#EF4444'; const sign=r.entry==='credit'?'+':'-'; return `<tr>
<td>${r.time}</td><td><span class="tag ${r.entry==='credit'?'confirmed':'failed'}">${r.entry}</span></td>
<td class="right" style="color:${color}">${sign} Â¥ ${r.amount.toLocaleString('zh-CN')}</td>
<td class="right">Â¥ ${r.balance_after.toLocaleString('zh-CN')}</td>
<td>${r.biz}</td><td>${r.note||''}</td></tr>` }
function render(){ $('#tbl').innerHTML = `<table><thead><tr>
<th>æ—¶é—´</th><th>ç±»å‹</th><th>é‡‘é¢</th><th>ä½™é¢</th><th>ä¸šåŠ¡æ¥æº</th><th>å¤‡æ³¨</th>
</tr></thead><tbody>${ledger.map(row).join('')}</tbody></table>` }
$('#btnAdj').onclick=()=>{ openDrawer(); $('#drawerBody').innerHTML = `<div class="desc">
<div class="row"><div class="label">æ–¹å‘</div><div class="value"><select id='dir'><option value='credit'>å…¥è´¦</option><option value='debit'>å‡ºè´¦</option></select></div></div>
<div class="row"><div class="label">é‡‘é¢</div><div class="value"><input type='text' id='amt' placeholder='é‡‘é¢ï¼ˆå…ƒï¼‰' style='height:34px;padding:0 10px;border:1px solid var(--line);border-radius:8px;'></div></div>
<div class="row"><div class="label">åŸå› </div><div class="value"><input type='text' id='note' placeholder='è¯´æ˜' style='height:34px;padding:0 10px;border:1px solid var(--line);border-radius:8px;'></div></div>
</div>
<div style='margin-top:12px;display:flex;gap:8px'>
<button class='btn primary' id='ok'>æäº¤</button>
<button class='btn' onclick='closeDrawer()'>å–æ¶ˆ</button>
</div>`;
$('#ok').onclick=()=>{ const dir=$('#dir').value; const amt=Number($('#amt').value||0); if(!amt){ toast('é‡‘é¢ä¸åˆæ³•','error'); return; }
const bal = ledger.length? ledger[0].balance_after : 0; const after = dir==='credit'? bal+amt : bal-amt;
ledger.unshift({id:'L'+Math.random(), time:new Date().toLocaleString(), entry:dir, amount:amt, balance_after:after, biz:'adjust', note:$('#note').value||''})
toast('å·²æäº¤','success'); render(); closeDrawer();
}
}
render();
</script>
</body></html>