<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>å®¢æˆ·å……å€¼ç®¡ç†</title>
<link rel="stylesheet" href="../assets/app.css"/>
</head>
<body>
<div class="layout">
<header><div class="brand">ğŸ”¶ åå°ç®¡ç†å¹³å° <span class="env">Demo</span></div><div class="hint">çº¯å‰ç«¯é™æ€é¢„è§ˆ</div></header>
<aside>
<nav class="menu">
<h4>èµ„é‡‘ä¸è´¦æˆ·</h4>
<a href="./finance-recharge.html" class="active">å®¢æˆ·å……å€¼ç®¡ç†</a>
<a href="./finance-company-account.html">å…¬å¸è´¦æˆ·</a>
<a href="./finance-platform-account.html">å¹³å°è´¦æˆ·</a>
<a href="./finance-settlement-center.html">ç»“ç®—ä¸­å¿ƒ</a>
<a href="./finance-withdraw.html">æç°ç®¡ç†</a>
<a href="./finance-recon-reports.html">å¯¹è´¦æŠ¥è¡¨</a>
<h4>å¯¼èˆª</h4>
<a href="../index.html">è¿”å›é¦–é¡µ</a>
</nav>
</aside>
<main>
<div class="card">
<div class="toolbar">
<div class="filters">
<input type="text" id="kw" placeholder="æœç´¢å…¬å¸â€¦"/>
<select id="state">
<option value="">å…¨éƒ¨çŠ¶æ€</option><option value="pending">å¾…ç¡®è®¤</option>
<option value="confirmed">å·²ç¡®è®¤</option><option value="failed">å¤±è´¥</option>
</select>
<button class="btn ghost" id="btnFilter">ç­›é€‰</button>
</div>
<div class="actions"><button class="btn" id="btnCreate">æ–°å»ºå……å€¼è®°å½•</button></div>
</div>
<div id="tableWrap"></div>
</div>
<div class="footer-note">ä»…å‰ç«¯å†…å­˜æ¨¡æ‹Ÿï¼Œä¸ä¼šæŒä¹…åŒ–ã€‚</div>
</main>
</div>
<div class="drawer"><div class="head"><div>å……å€¼è¯¦æƒ…</div><div><button class="btn" onclick="closeDrawer()">å…³é—­</button></div></div><div class="body" id="drawerBody"></div></div>
<script src="../assets/app.js"></script>
<script>
const db = { recharges:[
{ id:'rcg_1001', company:'å¹¿å·æŸå“ç‰Œ', amount:52000, channel:'bank', voucher:'', state:'pending', created:'2025-09-20 10:00' },
{ id:'rcg_1002', company:'æ·±åœ³æŸå“ç‰Œ', amount:30000, channel:'alipay', voucher:'', state:'confirmed', created:'2025-09-19 12:00' },
{ id:'rcg_1003', company:'å¹¿å·æŸå“ç‰Œ', amount:18888, channel:'wechat', voucher:'', state:'failed', created:'2025-09-18 09:30' },
]};
function tag(s){const m={pending:'å¾…ç¡®è®¤',confirmed:'å·²ç¡®è®¤',failed:'å¤±è´¥'};return `<span class="tag ${s}">${m[s]||s}</span>`}
function fmt(n){return Number(n).toLocaleString('zh-CN')}
function render(){
const kw=$('#kw').value.trim().toLowerCase(); const st=$('#state').value;
let list=[...db.recharges]; if(kw) list=list.filter(r=>r.company.toLowerCase().includes(kw)||r.id.toLowerCase().includes(kw)); if(st) list=list.filter(r=>r.state===st);
const rows=list.map(r=>`<tr>
<td><a href="javascript:void(0)" data-id="${r.id}" class="link-detail">${r.id}</a></td>
<td>${r.company}</td><td class="amount">Â¥ ${fmt(r.amount)}</td>
<td><span class="pill">${r.channel}</span></td><td><span class="muted">â€”</span></td>
<td>${tag(r.state)}</td><td>${r.created}</td>
<td><button class="btn" data-op="view" data-id="${r.id}">æŸ¥çœ‹</button>
<button class="btn primary" data-op="confirm" data-id="${r.id}" ${r.state!=='pending'?'disabled':''}>ç¡®è®¤åˆ°è´¦</button>
<button class="btn danger" data-op="fail" data-id="${r.id}" ${r.state!=='pending'?'disabled':''}>æ ‡è®°å¤±è´¥</button></td>
</tr>`).join('');
$('#tableWrap').innerHTML = `<table><thead><tr><th>å……å€¼ID</th><th>å…¬å¸</th><th>é‡‘é¢</th><th>æ¸ é“</th><th>å‡­è¯</th><th>çŠ¶æ€</th><th>åˆ›å»ºæ—¶é—´</th><th>æ“ä½œ</th></tr></thead><tbody>${rows||`<tr><td colspan=8 class='empty'>æš‚æ— æ•°æ®</td></tr>`}</tbody></table>`;
document.querySelectorAll('[data-op="view"],.link-detail').forEach(el=>el.onclick=(e)=>openDetail(e.currentTarget.getAttribute('data-id')||e.currentTarget.textContent));
document.querySelectorAll('[data-op="confirm"]').forEach(el=>el.onclick=(e)=>changeState(e.currentTarget.getAttribute('data-id'),'confirmed'));
document.querySelectorAll('[data-op="fail"]').forEach(el=>el.onclick=(e)=>changeState(e.currentTarget.getAttribute('data-id'),'failed'));
}
function openDetail(id){
const r=db.recharges.find(x=>x.id===id); if(!r) return;
$('#drawerBody').innerHTML = `<div class="desc">
<div class="row"><div class="label">å……å€¼ID</div><div class="value">${r.id}</div></div>
<div class="row"><div class="label">å…¬å¸</div><div class="value">${r.company}</div></div>
<div class="row"><div class="label">é‡‘é¢</div><div class="value">Â¥ ${fmt(r.amount)}</div></div>
<div class="row"><div class="label">æ¸ é“</div><div class="value"><span class="badge">${r.channel}</span></div></div>
<div class="row"><div class="label">çŠ¶æ€</div><div class="value">${tag(r.state)}</div></div>
<div class="row"><div class="label">åˆ›å»ºæ—¶é—´</div><div class="value">${r.created}</div></div>
</div>
<div style="margin-top:12px;display:flex;gap:8px">
<button class="btn primary" ${r.state!=='pending'?'disabled':''} onclick="changeState('${r.id}','confirmed')">ç¡®è®¤åˆ°è´¦</button>
</body></html>