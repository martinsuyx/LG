<!DOCTYPE html>
<html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>å…¬å¸ç®¡ç†</title><link rel="stylesheet" href="../assets/app.css"/></head>
<body>
<div class="layout">
<header><div class="brand">ğŸ”¶ åå° <span class="env">Demo</span></div><div class="hint">å…¬å¸ç®¡ç†</div></header>
<aside><nav class="menu">
<h4>ç»„ç»‡ä¸ç”¨æˆ·</h4>
<a href="./companies.html" class="active">å…¬å¸ç®¡ç†</a>
<a href="./teams.html">å›¢é˜Ÿç®¡ç†</a>
<a href="./org-tree.html">ç»„ç»‡æ ‘</a>
<a href="./stores.html">é—¨åº—ç®¡ç†</a>
<a href="./users.html">ç”¨æˆ·</a>
<a href="./roles-permissions.html">è§’è‰²æƒé™</a>
<a href="./security-policies.html">å®‰å…¨ç­–ç•¥</a>
<a href="./dictionaries.html">æ•°æ®å­—å…¸</a>
<h4>å¯¼èˆª</h4><a href="../index.html">è¿”å›é¦–é¡µ</a>
</nav></aside>
<main>
<div class="card"><div class="toolbar"><div>å…¬å¸åˆ—è¡¨</div><div><button class="btn" id="btnNew">æ–°å»ºå…¬å¸</button></div></div>
<div id="tbl"></div></div>
</main>
</div>
<div class="drawer"><div class="head"><div>å…¥é©»å®¡æ‰¹</div><div><button class="btn" onclick="closeDrawer()">å…³é—­</button></div></div>
<div class="body" id="drawerBody"></div></div>
<script type="module">
import { $, openDrawer, closeDrawer, toast } from '../assets/app.js';
let companies=[
{id:'CMP-1001', name:'å¹¿å·æŸå“ç‰Œ', uscc:'9144*********', industry:'ç”µä¿¡', status:'approved', contact:'Alice', accounts:8, balance:120000},
{id:'CMP-1002', name:'æ·±åœ³æŸå“ç‰Œ', uscc:'9144*********', industry:'é›¶å”®', status:'pending', contact:'Bob', accounts:3, balance:56000},
];
function tag(s){const map={approved:'å·²é€šè¿‡',pending:'å¾…å®¡æ ¸',rejected:'å·²é©³å›'};const cls={approved:'confirmed',pending:'pending',rejected:'failed'};return `<span class='tag ${cls[s]}'>${map[s]}</span>`}
function render(){ $('#tbl').innerHTML=`<table><thead><tr>
<th>å…¬å¸ID</th><th>åç§°</th><th>ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç </th><th>è¡Œä¸š</th><th>çŠ¶æ€</th><th>è”ç³»äºº</th><th>è´¦å·æ•°</th><th>ä½™é¢</th><th>æ“ä½œ</th>
</tr></thead><tbody>${companies.map(c=>`<tr>
<td>${c.id}</td><td>${c.name}</td><td>${c.uscc}</td><td>${c.industry}</td><td>${tag(c.status)}</td>
<td>${c.contact}</td><td>${c.accounts}</td><td class='right'>Â¥ ${c.balance.toLocaleString('zh-CN')}</td>
<td><button class='btn' onclick='approve("${c.id}")'>å®¡æ‰¹</button></td>
</tr>`).join('')}</tbody></table>` }
window.approve=(id)=>{ const c=companies.find(x=>x.id===id); openDrawer(); $('#drawerBody').innerHTML=`
<div class='desc'>
<div class='row'><div class='label'>å…¬å¸</div><div class='value'>${c.name}</div></div>
<div class='row'><div class='label'>ä¿¡ç”¨ä»£ç </div><div class='value'>${c.uscc}</div></div>
<div class='row'><div class='label'>åˆåŒç­¾ç½²</div><div class='value'><span class='tag confirmed'>signed</span></div></div>
</div>
<div style='margin-top:12px'><button class='btn primary' onclick='ok()'>é€šè¿‡</button> <button class='btn danger' onclick='rej()'>é©³å›</button></div>`;
window.ok=()=>{ c.status='approved'; toast('å·²é€šè¿‡','success'); render(); closeDrawer(); }
window.rej=()=>{ c.status='rejected'; toast('å·²é©³å›','error'); render(); closeDrawer(); }
}
$('#btnNew').onclick=()=>{ companies.unshift({id:'CMP-'+Math.floor(Math.random()*1e5),name:'æ–°å…¬å¸',uscc:'9144*********',industry:'å…¶ä»–',status:'pending',contact:'â€”',accounts:0,balance:0}); render(); }
render();
</script>
</body></html>